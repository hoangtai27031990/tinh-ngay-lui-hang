<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Tính ngày lùi hàng</title>
<style>
body { font-family: Arial; background:#f5f6fa; padding:20px; }
.container { max-width:500px; margin:auto; background:#fff; padding:20px; border-radius:8px; box-shadow:0 0 10px rgba(0,0,0,0.1); }
h2 { text-align:center; }
label { display:block; margin-top:10px; }
input, button { width:100%; padding:8px; margin-top:5px; }
.result { margin-top:15px; background:#eef; padding:10px; border-radius:5px; }
</style>
</head>
<body>
<div class="container">
<h2>TÍNH NGÀY LÙI HÀNG</h2>


<label>Ngày sản xuất (NSX)</label>
<input type="date" id="nsx">


<label>Hạn sử dụng (HSD)</label>
<input type="date" id="hsd">


<button onclick="tinh()">Tính kết quả</button>
<button onclick="resetForm()">Nhập lại</button>


<div class="result" id="ketqua"></div>
</div>


<script>
function tinh(){
const nsx = new Date(document.getElementById("nsx").value);
const hsd = new Date(document.getElementById("hsd").value);
const kq = document.getElementById("ketqua");


if(!nsx || !hsd || isNaN(nsx) || isNaN(hsd)){
kq.innerHTML = "Vui lòng nhập đầy đủ NSX và HSD.";
return;
}


if(nsx >= hsd){
kq.innerHTML = "NSX phải nhỏ hơn HSD.";
return;
}


const totalDays = Math.floor((hsd - nsx)/(1000*60*60*24));
const twentyPercent = Math.floor(totalDays * 0.2);
const luiDate = new Date(hsd);
luiDate.setDate(luiDate.getDate() - twentyPercent);


const format = d => d.toLocaleDateString("vi-VN");


kq.innerHTML = `
Tổng HSD: ${totalDays} ngày<br>
20% HSD: ${twentyPercent} ngày<br>
<b>Ngày lùi hàng: ${format(luiDate)}</b>
`;
}


function resetForm(){
document.getElementById("nsx").value="";
document.getElementById("hsd").value="";
document.getElementById("ketqua").innerHTML="";
}
</script>
</body>
</html>
